<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js">
    </script>
    <script>
        AFRAME.registerComponent('foo', {
            init: function () {
                this.el.addEventListener('collide', function (e) {
                    let objet = e.detail.body.el;
                    console.log('Player collided with ', objet.id);

                    let classe = objet.getAttribute("class");
                    if (classe="mur") {

                        // let couleur = objet.getAttribute('color');
                        // objet.setAttribute('color', "#FF0000");
                        // setTimeout(function () {
                        //     objet.setAttribute('color', couleur);
                        // }, 3000);
                        e.detail.target.el; // Original entity (playerEl).
                        e.detail.body.el; // Other entity, which playerEl touched.
                        e.detail.contact; // Stats about the collision (CANNON.ContactEquation).
                        e.detail.contact.ni; // Normal (direction) of the collision (CANNON.Vec3).
                    }

                });
            }
        })
    </script>
</head>

<body>
    <a-scene background="color: skyblue">
        <a-entity id="camera" position="0 1.6 0">
            <!-- Camera Entity -->
            <a-entity id="camera" camera look-controls wasd-controls kinematic-body foo></a-entity>
        </a-entity>
        
        <!-- position joueur -->
        <a-box static-body class="mur" position="0 0 0" scale="0.2 0.2 0.2" color="#FF0000"></a-box>

        <!-- cotés extérieurs -->
        <a-box static-body class="mur" position="0 1 -1.5" rotation="" scale="3 2 0.01" color="#FF9900"></a-box>
        <!-- <a-box static-body class="mur" position="-1.5 1 0" rotation="0 90 0" scale="3 2 0.01" color="#99FF00"></a-box>
        <a-box static-body class="mur" position="1.5 1 0" rotation="0 90 0" scale="3 2 0.01" color="#99FF00"></a-box>
        <a-box static-body class="mur" position="-1 1 1.5" rotation="" scale="1 2 0.01" color="#FF9900"></a-box>
        <a-box static-body class="mur" position="0.75 1 1.5" rotation="" scale="1.5 2 0.01" color="#FF9900"></a-box> -->

        <!-- intérieur verticaux -->
        <!-- <a-box static-body class="mur" position="-0.5 1 -1.25" rotation="0 90 0" scale="0.5 2 0.01" color="#00FF99"></a-box>
        <a-box static-body class="mur" position="1 1 -0.75" rotation="0 90 0" scale="0.5 2 0.01" color="#00FF99"></a-box>
        <a-box static-body class="mur" position="-1 1 -0.5" rotation="0 90 0" scale="1 2 0.01" color="#00FF99"></a-box>
        <a-box static-body class="mur" position="-1 1 0.75" rotation="0 90 0" scale="0.5 2 0.01" color="#00FF99"></a-box>
        <a-box static-body class="mur" position="-0.5 1 0" rotation="0 90 0" scale="1 2 0.01" color="#00FF99"></a-box>
        <a-box static-body class="mur" position="-0.5 1 1.25" rotation="0 90 0" scale="0.5 2 0.01" color="#00FF99"></a-box>
        <a-box static-body class="mur" position="0.5 1 1" rotation="0 90 0" scale="1 2 0.01" color="#00FF99"></a-box>
        <a-box static-body class="mur" position="0.5 1 -0.25" rotation="0 90 0" scale="0.5 2 0.01" color="#00FF99"></a-box>
        <a-box static-body class="mur" position="1 1 0.5" rotation="0 90 0" scale="1 2 0.01" color="#00FF99"></a-box> -->

        <!-- intérieur horizontaux -->
        <!-- <a-box static-body class="mur" position="1 1 -1" rotation="" scale="1 2 0.01" color="#0099FF"></a-box>
        <a-box static-body class="mur" position="-0.5 1 -1" rotation="" scale="1 2 0.01" color="#0099FF"></a-box>
        <a-box static-body class="mur" position="-0.25 1 -0.5" rotation="" scale="0.5 2 0.01" color="#0099FF"></a-box>
        <a-box static-body class="mur" position="-0.25 1 0.5" rotation="" scale="1.5 2 0.01" color="#0099FF"></a-box>
        <a-box static-body class="mur" position="-0.25 1 1" rotation="" scale="0.5 2 0.01" color="#0099FF"></a-box>
        <a-box static-body class="mur" position="1.25 1 1" rotation="" scale="0.5 2 0.01" color="#0099FF"></a-box>
        <a-box static-body class="mur" position="0.75 1 0" rotation="" scale="0.5 2 0.01" color="#0099FF"></a-box> -->

        <!-- sol  -->
        <a-plane id=static-body position="0 0 0" rotation="-90 0 0" width="3" height="3" color="#7BC8A4">
        </a-plane>

    </a-scene>
</body>

</html>